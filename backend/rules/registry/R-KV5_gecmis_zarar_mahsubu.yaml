rule_id: R-KV5
name: "Gecmis Zarar Mahsubu"
version: "1.0.0"
category: "KV_BRIDGE"
priority: "HIGH"
description: |
  Gecmis donem zararlarinin dogru mahsup edilip edilmedigini kontrol eder.

legal_basis_refs:
  - SRC-0001

inputs:
  - name: gecmis_zarar
    type: decimal
    required: true
    description: "Devir zararlari" 
  - name: mahsup_edilen
    type: decimal
    required: true
    description: "Mahsup edilen zarar" 
  - name: mali_kar
    type: decimal
    required: true
    description: "Cari donem mali kari" 

algorithm: |
  if mahsup_edilen > mali_kar:
    status = 'error'
  elif mahsup_edilen > gecmis_zarar:
    status = 'error'
  else:
    status = 'ok'

thresholds: {}

evidence_required:
  - kv_beyani.pdf

test_cases:
  - name: "Dogru"
    inputs:
      gecmis_zarar: 100000
      mahsup_edilen: 50000
      mali_kar: 80000
    expected:
      status: "ok"
  - name: "Fazla"
    inputs:
      gecmis_zarar: 100000
      mahsup_edilen: 150000
      mali_kar: 80000
    expected:
      status: "error"

created_at: "2026-01-01T00:00:00Z"
updated_at: "2026-01-01T00:00:00Z"
